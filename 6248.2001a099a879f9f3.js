(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6248],{6248:(u,m,r)=>{"use strict";r.r(m),r.d(m,{CapcheckComponent:()=>j});var l=r(5861),p=r(6895),i=r(1991),a=r(7579),f=r(2241),c=r(2965),g=r(5825),b=r(2524),e=r(1571),Y=r(5620),Z=r(6263),K=r(8468),J=r(4070),$=r(1317),N=r(1208);const H=["fileButtonClick"],R=["inputNums"];function L(S,x){if(1&S&&(e.TgZ(0,"ion-item")(1,"ion-row",20)(2,"ion-col",21)(3,"textarea",22,23),e._uU(5),e.qZA()()()()),2&S){const s=x.$implicit,h=x.index;e.xp6(3),e.MGl("id","num",h,""),e.xp6(2),e.Oqu(s)}}function P(S,x){if(1&S&&(e.TgZ(0,"ion-list"),e.YNc(1,L,6,2,"ion-item",19),e.qZA()),2&S){const s=e.oxw();e.xp6(1),e.Q6J("ngForOf",s.resultList)}}function z(S,x){if(1&S&&(e.TgZ(0,"ion-text",24),e._uU(1," \u5171 "),e.TgZ(2,"strong"),e._uU(3),e.qZA(),e._uU(4," \u6ce8\x13 "),e.qZA()),2&S){const s=e.oxw();e.xp6(3),e.Oqu(s.resultList.length)}}function U(S,x){1&S&&(e.TgZ(0,"ion-text",25),e._uU(1," \u82e5\u6709\u865f\u78bc\u8fa8\u8b58\u6709\u8aa4\uff0c\u8acb\u81ea\u884c\u4fee\u6b63\uff01 "),e.qZA())}let j=(()=>{class S{constructor(s,h,O,A,I,F,W,n,t,o){this.commonService=s,this.mark6Service=h,this._router=O,this._activeRoute=A,this.navCtrl=I,this.loadingController=F,this.dataVal=W,this.pageScrollService=n,this.actionCtrl=t,this.document=o,this.MAX_NUM=49,this.screenWidth=window.innerWidth,this.resultList=new Array,this.result="-",this.result1="-",this.analysisClick=!1,this.showWebcam=!0,this.allowCameraSwitch=!0,this.multipleWebcamsAvailable=!1,this.videoOptions={},this.errors=[],this.webcamImage=null,this.rotateVal=0,this.trigger=new a.x,this.nextWebcam=new a.x,this.imageChangedEvent="",this.croppedImage=""}ngOnInit(){c.BF.getAvailableVideoInputs().then(s=>{this.multipleWebcamsAvailable=s&&s.length>1})}ionViewDidEnter(){}ngAfterViewChecked(){}triggerSnapshot(){this.trigger.next()}toggleWebcam(){this.showWebcam=!this.showWebcam}handleInitError(s){this.errors.push(s),this.showError||this.commonService.showAlert("ERROR","iPhone(iOS) \u7528\u6237\u8acb\u4f7f\u7528 Safari \u958b\u555f!")}showNextWebcam(s){this.nextWebcam.next(s)}handleImage(s){console.info("received webcam image",s),this.webcamImage=s,this.theCamImage=this.webcamImage.imageAsDataUrl}cameraWasSwitched(s){console.log("active device: "+s),this.deviceId=s}get triggerObservable(){return this.trigger.asObservable()}get nextWebcamObservable(){return this.nextWebcam.asObservable()}takePhoto(){this.result="-",this.croppedImage=null,this.trigger.next()}check(){this.resultList.length=0,this.resultList=[],this.croppedImage?this.doOCR():this.commonService.showAlert("Error","\u8acb\u5148 [\u9078\u53d6\u5f69\u7968]\uff0c\u7136\u5f8c\u88c1\u526a\u5f69\u7968\u81f3\u53ea\u6709\u6295\u6ce8\u865f\u78bc\uff01")}doRotate(){this.rotateVal=this.rotateVal+1,4==this.rotateVal&&(this.rotateVal=0)}reset(){this.result="-",this.croppedImage=null,this.resultList.length=0,this.resultList=[],this.analysisClick=!1}fileChangeEvent(s){this.reset(),this.imageChangedEvent=s}imageCropped(s){this.croppedImage=s.base64}imageLoaded(){}cropperReady(){}loadImageFailed(){}doOCR(){var s=this;return(0,l.Z)(function*(){const h=yield(0,g.createWorker)({logger:A=>console.log(A)});let O=yield s.loadingController.create({message:"\u865f\u78bc\u8fa8\u8b58\u4e2d...",spinner:"circles"});O.present().then((0,l.Z)(function*(){yield h.load(),yield h.load(),yield h.loadLanguage("eng"),yield h.initialize("eng"),yield h.setParameters({tessedit_char_whitelist:"0123456789+/"}),yield h.recognize(s.croppedImage).then(A=>{if(s.result=A.data.text,h.terminate(),null!=s.result&&s.result.length>0){const I=s.result.split("/");for(const F in I){const W=I[F].replace(/(\r\n|\n|\r)/gm,"").replace(/\s/g,"");s.resultList.push(W)}}O.dismiss(),setTimeout(()=>{s.content.scrollToBottom()},300)})}))})()}doCheck(){var s=this;return(0,l.Z)(function*(){let h;if(h=new Array,0!==s.resultList.length){let O=yield s.loadingController.create({message:"\u6838\u5c0d\u4e2d...",spinner:"circles"});O.present().then(()=>{s.mark6Service.getLast30().subscribe(A=>{if(!(null!=A&&A.length>0))return O.dismiss(),h.length=0,void(h=[]);{let I=s.inputNums.toArray();s.resultList.length=0,s.resultList=[];for(const F in I)s.resultList.push(I[F].nativeElement.value);for(const F in s.resultList){let W=Number(F)+1;const n=s.resultList[F].replace(/(\r\n|\n|\r)/gm,""),t=n.split("+");let o=new Array;for(const C in t){const w=Number(t[C]);if(w>s.MAX_NUM||w<=0||!(0,f.EN)(t[C]))return s.commonService.showAlert("ERROR",`\u7b2c ${W} \u6ce8\u542b\u6709\u932f\u8aa4\u865f\u78bc\uff0c\u8acb\u4fee\u6b63\uff01`),O.dismiss(),h.length=0,void(h=[]);o.push(w)}if(o.length<6)return s.commonService.showAlert("Error",`\u7b2c ${W} \u6ce8\u6700\u5c11\u8981\u67096\u500b\u5b57\uff0c\u8acb\u4fee\u6b63\uff01`),O.dismiss(),h.length=0,void(h=[]);if((0,f.bs)(o))return s.commonService.showAlert("Error",`\u7b2c ${W} \u6ce8\u542b\u6709\u91cd\u8986\u865f\u78bc\uff0c\u8acb\u4fee\u6b63\uff01`),O.dismiss(),h.length=0,void(h=[]);if(o.length>s.MAX_NUM)return s.commonService.showAlert("Error",`\u7b2c {bNoVal} \u6ce8\u4e0d\u80fd\u591a\u65bc ${s.MAX_NUM} \u500b\u5b57\uff0c\u8acb\u4fee\u6b63\uff01`),O.dismiss(),h.length=0,void(h=[]);let y=new f.Pf;y.numbers=n;let d=new Array;for(const C of A){let w=new f.$j;w=JSON.parse(JSON.stringify(C));let T=0;for(const k of o)k===w.number1?(w.matched[0]=!0,T++):k===w.number2?(w.matched[1]=!0,T++):k===w.number3?(w.matched[2]=!0,T++):k===w.number4?(w.matched[3]=!0,T++):k===w.number5?(w.matched[4]=!0,T++):k===w.number6&&(w.matched[5]=!0,T++),k===w.numberX&&(w.matched[6]=!0,T+=.5);T>=3&&d.push(w)}y.matchedResults=d,h.push(y)}s.result1=JSON.stringify(h),O.dismiss(),h.length>=1?(s.dataVal.storage=h,s.navCtrl.navigateForward(["capcheck/result"],{state:h})):s.commonService.showAlert("Info","\u95a3\u4e0b\u7684\u5f69\u7968\u5728\u6700\u8fd130\u671f\u6c92\u6709\u4e2d\u734e")}},A=>{O.dismiss(),console.log(A),h.length=0,h=[]})})}else s.commonService.showAlert("Error","\u8acb\u5148 [\u9078\u53d6\u5f69\u7968]\uff0c\u7136\u5f8c\u88c1\u526a\u5f69\u7968\u81f3\u53ea\u6709\u6295\u6ce8\u865f\u78bc\uff01")})()}openActionSheet(){this.actionCtrl.create({buttons:[{text:"\u9078\u53d6\u5f69\u7968",icon:"camera",handler:()=>{document.getElementById("fileButtonClick").click()}},{text:"\u8fa8\u8b58\u865f\u78bc",icon:"barcode",handler:()=>{this.check()}},{text:"\u6838\u5c0d\u5f69\u7968",icon:"contract",handler:()=>{this.doCheck()}},{text:"\u65cb\u8f49",icon:"return-up-forward-outline",handler:()=>{this.doRotate()}},{text:"\u53d6\u6d88",role:"cancel"}]}).then(s=>s.present())}}return S.\u0275fac=function(s){return new(s||S)(e.Y36(Y.v),e.Y36(Z.d),e.Y36(K.F0),e.Y36(K.gz),e.Y36(i.SH),e.Y36(i.HT),e.Y36(J.B),e.Y36($.oh),e.Y36(i.BX),e.Y36(p.K0))},S.\u0275cmp=e.Xpm({type:S,selectors:[["app-capcheck"]],viewQuery:function(s,h){if(1&s&&(e.Gf(H,7),e.Gf(i.W2,7),e.Gf(R,5)),2&s){let O;e.iGM(O=e.CRH())&&(h.fileButton=O.first),e.iGM(O=e.CRH())&&(h.content=O.first),e.iGM(O=e.CRH())&&(h.inputNums=O)}},standalone:!0,features:[e.jDz],decls:30,vars:8,consts:[["slot","start"],["slot","end",1,"ion-padding"],[3,"click"],["name","chevron-down-circle-outline"],[1,"ion-padding"],["id","contentID",2,"text-align","center"],["for","m6pic",2,"color","blue"],[2,"color","green"],["id","fileButtonClick","color","warning",2,"display","none",3,"click"],["fileButtonClick",""],["type","file",2,"display","none",3,"change"],["fileInput",""],[1,"cropper-container"],["format","png",2,"width","300px","height","50x","text-align","left",3,"imageChangedEvent","maintainAspectRatio","cropperMinHeight","canvasRotation","imageCropped","imageLoaded","cropperReady","loadImageFailed"],[3,"src"],[4,"ngIf"],["color","primary",4,"ngIf"],["color","danger",4,"ngIf"],[1,"theEnd"],[4,"ngFor","ngForOf"],[2,"vertical-align","middle","text-align","center","width","100%"],[2,"width","100%"],["autosize","",2,"width","100%","background-color","navajowhite",3,"id"],["inputNums",""],["color","primary"],["color","danger"]],template:function(s,h){if(1&s){const O=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-buttons",1)(5,"ion-button",2),e.NdJ("click",function(){return h.openActionSheet()}),e._UZ(6,"ion-icon",3),e.qZA()(),e.TgZ(7,"ion-title"),e._uU(8," \u4e00\u62cd\u5373\u5c0d "),e.qZA()()(),e.TgZ(9,"ion-content",4)(10,"div",5)(11,"label",6),e._uU(12,"1.[\u9078\u53d6/\u62cd\u7167\u5f69\u7968]\uff0c2.\u526a\u88c1\u5230\u53ea\u6709\u865f\u78bc\u90e8\u4efd\uff0c3.[\u8fa8\u8b58\u865f\u78bc]\uff0c4.[\u6838\u5c0d\u5f69\u7968]\uff01"),e._UZ(13,"br"),e.TgZ(14,"span",7),e._uU(15,"(\u66ab\u4e0d\u652f\u6301\u6838\u5c0d\u81bd\u62d6\u5f69\u7968)"),e.qZA()(),e._UZ(16,"br"),e.TgZ(17,"ion-button",8,9),e.NdJ("click",function(){e.CHM(O);const I=e.MAs(21);return e.KtG(I.click())}),e._uU(19,"\u6309\u9019\u88cf\u9078\u53d6\u4f60\u7684\u5f69\u7968"),e.qZA(),e.TgZ(20,"input",10,11),e.NdJ("change",function(I){return h.fileChangeEvent(I)}),e.qZA(),e.TgZ(22,"div",12)(23,"image-cropper",13),e.NdJ("imageCropped",function(I){return h.imageCropped(I)})("imageLoaded",function(){return h.imageLoaded()})("cropperReady",function(){return h.cropperReady()})("loadImageFailed",function(){return h.loadImageFailed()}),e.qZA()(),e._UZ(24,"img",14)(25,"br"),e.YNc(26,P,2,1,"ion-list",15),e.YNc(27,z,5,1,"ion-text",16),e.YNc(28,U,2,0,"ion-text",17),e._UZ(29,"div",18),e.qZA()()}2&s&&(e.xp6(23),e.Q6J("imageChangedEvent",h.imageChangedEvent)("maintainAspectRatio",!1)("cropperMinHeight",30)("canvasRotation",h.rotateVal),e.xp6(1),e.Q6J("src",h.croppedImage,e.LSH),e.xp6(2),e.Q6J("ngIf",0!==h.resultList.length),e.xp6(1),e.Q6J("ngIf",0!==h.resultList.length),e.xp6(1),e.Q6J("ngIf",0!==h.resultList.length))},dependencies:[b.b,p.sg,p.O5,i.YG,i.Sm,i.wI,i.W2,i.Gu,i.gu,i.Ie,i.q_,i.fG,i.Nd,i.yW,i.wd,i.sr,N.ap]}),S})()},9456:u=>{u.exports=function m(){return!!(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}},7854:u=>{var m=function(r){"use strict";var a,l=Object.prototype,p=l.hasOwnProperty,i=Object.defineProperty||function(n,t,o){n[t]=o.value},f="function"==typeof Symbol?Symbol:{},c=f.iterator||"@@iterator",g=f.asyncIterator||"@@asyncIterator",v=f.toStringTag||"@@toStringTag";function b(n,t,o){return Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}),n[t]}try{b({},"")}catch{b=function(t,o,y){return t[o]=y}}function e(n,t,o,y){var C=Object.create((t&&t.prototype instanceof H?t:H).prototype),w=new I(y||[]);return i(C,"_invoke",{value:s(n,o,w)}),C}function Y(n,t,o){try{return{type:"normal",arg:n.call(t,o)}}catch(y){return{type:"throw",arg:y}}}r.wrap=e;var Z="suspendedStart",K="suspendedYield",J="executing",$="completed",N={};function H(){}function R(){}function L(){}var P={};b(P,c,function(){return this});var z=Object.getPrototypeOf,U=z&&z(z(F([])));U&&U!==l&&p.call(U,c)&&(P=U);var j=L.prototype=H.prototype=Object.create(P);function S(n){["next","throw","return"].forEach(function(t){b(n,t,function(o){return this._invoke(t,o)})})}function x(n,t){function o(C,w,T,k){var D=Y(n[C],n,w);if("throw"!==D.type){var V=D.arg,E=V.value;return E&&"object"==typeof E&&p.call(E,"__await")?t.resolve(E.__await).then(function(_){o("next",_,T,k)},function(_){o("throw",_,T,k)}):t.resolve(E).then(function(_){V.value=_,T(V)},function(_){return o("throw",_,T,k)})}k(D.arg)}var y;i(this,"_invoke",{value:function d(C,w){function T(){return new t(function(k,D){o(C,w,k,D)})}return y=y?y.then(T,T):T()}})}function s(n,t,o){var y=Z;return function(C,w){if(y===J)throw new Error("Generator is already running");if(y===$){if("throw"===C)throw w;return W()}for(o.method=C,o.arg=w;;){var T=o.delegate;if(T){var k=h(T,o);if(k){if(k===N)continue;return k}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(y===Z)throw y=$,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);y=J;var D=Y(n,t,o);if("normal"===D.type){if(y=o.done?$:K,D.arg===N)continue;return{value:D.arg,done:o.done}}"throw"===D.type&&(y=$,o.method="throw",o.arg=D.arg)}}}function h(n,t){var o=t.method,y=n.iterator[o];if(y===a)return t.delegate=null,"throw"===o&&n.iterator.return&&(t.method="return",t.arg=a,h(n,t),"throw"===t.method)||"return"!==o&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+o+"' method")),N;var d=Y(y,n.iterator,t.arg);if("throw"===d.type)return t.method="throw",t.arg=d.arg,t.delegate=null,N;var C=d.arg;return C?C.done?(t[n.resultName]=C.value,t.next=n.nextLoc,"return"!==t.method&&(t.method="next",t.arg=a),t.delegate=null,N):C:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,N)}function O(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]),2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]),this.tryEntries.push(t)}function A(n){var t=n.completion||{};t.type="normal",delete t.arg,n.completion=t}function I(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(O,this),this.reset(!0)}function F(n){if(n){var t=n[c];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var o=-1,y=function d(){for(;++o<n.length;)if(p.call(n,o))return d.value=n[o],d.done=!1,d;return d.value=a,d.done=!0,d};return y.next=y}}return{next:W}}function W(){return{value:a,done:!0}}return R.prototype=L,i(j,"constructor",{value:L,configurable:!0}),i(L,"constructor",{value:R,configurable:!0}),R.displayName=b(L,v,"GeneratorFunction"),r.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===R||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,L):(n.__proto__=L,b(n,v,"GeneratorFunction")),n.prototype=Object.create(j),n},r.awrap=function(n){return{__await:n}},S(x.prototype),b(x.prototype,g,function(){return this}),r.AsyncIterator=x,r.async=function(n,t,o,y,d){void 0===d&&(d=Promise);var C=new x(e(n,t,o,y),d);return r.isGeneratorFunction(t)?C:C.next().then(function(w){return w.done?w.value:C.next()})},S(j),b(j,v,"Generator"),b(j,c,function(){return this}),b(j,"toString",function(){return"[object Generator]"}),r.keys=function(n){var t=Object(n),o=[];for(var y in t)o.push(y);return o.reverse(),function d(){for(;o.length;){var C=o.pop();if(C in t)return d.value=C,d.done=!1,d}return d.done=!0,d}},r.values=F,I.prototype={constructor:I,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(A),!n)for(var t in this)"t"===t.charAt(0)&&p.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=a)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var t=this;function o(k,D){return C.type="throw",C.arg=n,t.next=k,D&&(t.method="next",t.arg=a),!!D}for(var y=this.tryEntries.length-1;y>=0;--y){var d=this.tryEntries[y],C=d.completion;if("root"===d.tryLoc)return o("end");if(d.tryLoc<=this.prev){var w=p.call(d,"catchLoc"),T=p.call(d,"finallyLoc");if(w&&T){if(this.prev<d.catchLoc)return o(d.catchLoc,!0);if(this.prev<d.finallyLoc)return o(d.finallyLoc)}else if(w){if(this.prev<d.catchLoc)return o(d.catchLoc,!0)}else{if(!T)throw new Error("try statement without catch or finally");if(this.prev<d.finallyLoc)return o(d.finallyLoc)}}}},abrupt:function(n,t){for(var o=this.tryEntries.length-1;o>=0;--o){var y=this.tryEntries[o];if(y.tryLoc<=this.prev&&p.call(y,"finallyLoc")&&this.prev<y.finallyLoc){var d=y;break}}d&&("break"===n||"continue"===n)&&d.tryLoc<=t&&t<=d.finallyLoc&&(d=null);var C=d?d.completion:{};return C.type=n,C.arg=t,d?(this.method="next",this.next=d.finallyLoc,N):this.complete(C)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),N},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.finallyLoc===n)return this.complete(o.completion,o.afterLoc),A(o),N}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc===n){var y=o.completion;if("throw"===y.type){var d=y.arg;A(o)}return d}}throw new Error("illegal catch attempt")},delegateYield:function(n,t,o){return this.delegate={iterator:F(n),resultName:t,nextLoc:o},"next"===this.method&&(this.arg=a),N}},r}(u.exports);try{regeneratorRuntime=m}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=m:Function("r","regeneratorRuntime = r")(m)}},5555:function(u,m,r){var l,p;l=function(){return function i(){var a=arguments.length;if(0===a)throw new Error("resolveUrl requires at least one argument; got none.");var f=document.createElement("base");if(f.href=arguments[0],1===a)return f.href;var c=document.getElementsByTagName("head")[0];c.insertBefore(f,c.firstChild);for(var v,g=document.createElement("a"),b=1;b<a;b++)g.href=arguments[b],f.href=v=g.href;return c.removeChild(f),v}},void 0!==(p=l.call(m,r,m,u))&&(u.exports=p)},9791:(u,m,r)=>{var l=r(7156).default;const p=r(2841);u.exports={recognize:function(){var f=l(function*(c,g,v){const b=yield p(v);return yield b.loadLanguage(g),yield b.initialize(g),b.recognize(c).finally(l(function*(){yield b.terminate()}))});return function(g,v,b){return f.apply(this,arguments)}}(),detect:function(){var f=l(function*(c,g){const v=yield p(g);return yield v.loadLanguage("osd"),yield v.initialize("osd"),v.detect(c).finally(l(function*(){yield v.terminate()}))});return function(g,v){return f.apply(this,arguments)}}()}},6057:u=>{u.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},562:u=>{u.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}},491:(u,m,r)=>{const l=r(6057);u.exports={defaultOEM:l.DEFAULT}},1722:u=>{u.exports={langPath:"https://tessdata.projectnaptha.com/4.0.0",workerBlobURL:!0,logger:()=>{}}},804:u=>{u.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}},833:(u,m,r)=>{const l=r(5011);let p=0;u.exports=({id:i,action:a,payload:f={}})=>{let c=i;return typeof c>"u"&&(c=l("Job",p),p+=1),{id:c,action:a,payload:f}}},5873:function(u,m,r){var l=r(7156).default,p=this;const i=r(833),{log:a}=r(7223),f=r(5011);let c=0;u.exports=()=>{const g=f("Scheduler",c),v={},b={};let e=[];c+=1;const Z=()=>Object.keys(v).length,K=()=>{if(0!==e.length){const R=Object.keys(v);for(let L=0;L<R.length;L+=1)if(typeof b[R[L]]>"u"){e[0](v[R[L]]);break}}},J=(R,L)=>new Promise((P,z)=>{const U=i({action:R,payload:L});e.push(function(){var j=l(function*(S){e.shift(),b[S.id]=U;try{P(yield S[R].apply(p,[...L,U.id]))}catch(x){z(x)}finally{delete b[S.id],K()}});return function(S){return j.apply(this,arguments)}}()),a(`[${g}]: Add ${U.id} to JobQueue`),a(`[${g}]: JobQueue length=${e.length}`),K()});return{addWorker:R=>(v[R.id]=R,a(`[${g}]: Add ${R.id}`),a(`[${g}]: Number of workers=${Z()}`),K(),R.id),addJob:function(){var R=l(function*(L,...P){if(0===Z())throw Error(`[${g}]: You need to have at least one worker before adding jobs`);return J(L,P)});return function(P){return R.apply(this,arguments)}}(),terminate:function(){var R=l(function*(){Object.keys(v).forEach(function(){var L=l(function*(P){yield v[P].terminate()});return function(P){return L.apply(this,arguments)}}()),e=[]});return function(){return R.apply(this,arguments)}}(),getQueueLen:()=>e.length,getNumWorkers:Z}}},2841:(u,m,r)=>{var l=r(7156).default;const p=r(3466),i=r(9038),a=r(833),{log:f}=r(7223),c=r(5011),{defaultOEM:g}=r(491),{defaultOptions:v,spawnWorker:b,terminateWorker:e,onMessage:Y,loadImage:Z,send:K}=r(6893);let J=0;u.exports=l(function*($={}){const N=c("Worker",J),{logger:H,errorHandler:R,...L}=p({...v,...$}),P={},z={};let U,j;const S=new Promise((E,_)=>{j=E,U=_});let s=b(L);s.onerror=E=>{U(E.message)},J+=1;const h=(E,_)=>{P[E]=_},O=(E,_)=>{z[E]=_},A=({id:E,action:_,payload:M})=>new Promise((G,B)=>{f(`[${N}]: Start ${E}, action=${_}`),h(_,G),O(_,B),K(s,{workerId:N,jobId:E,action:_,payload:M})}),w=function(){var E=l(function*(_,M={},G={blocks:!0,text:!0,hocr:!0,tsv:!0},B){return A(a({id:B,action:"recognize",payload:{image:yield Z(_),options:M,output:G}}))});return function(M){return E.apply(this,arguments)}}(),k=function(){var E=l(function*(_,M){return A(a({id:M,action:"detect",payload:{image:yield Z(_)}}))});return function(M,G){return E.apply(this,arguments)}}(),D=function(){var E=l(function*(){return null!==s&&(e(s),s=null),Promise.resolve()});return function(){return E.apply(this,arguments)}}();Y(s,({workerId:E,jobId:_,status:M,action:G,data:B})=>{if("resolve"===M){f(`[${E}]: Complete ${_}`);let Q=B;"recognize"===G?Q=i(B):"getPDF"===G&&(Q=Array.from({...B,length:Object.keys(B).length})),P[G]({jobId:_,data:Q})}else if("reject"===M){if(z[G](B),"load"===G&&U(B),!R)throw Error(B);R(B)}else"progress"===M&&H({...B,userJobId:_})});const V={id:N,worker:s,setResolve:h,setReject:O,load:()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),writeText:(E,_,M)=>A(a({id:M,action:"FS",payload:{method:"writeFile",args:[E,_]}})),readText:(E,_)=>A(a({id:_,action:"FS",payload:{method:"readFile",args:[E,{encoding:"utf8"}]}})),removeFile:(E,_)=>A(a({id:_,action:"FS",payload:{method:"unlink",args:[E]}})),FS:(E,_,M)=>A(a({id:M,action:"FS",payload:{method:E,args:_}})),loadLanguage:(E="eng",_)=>A(a({id:_,action:"loadLanguage",payload:{langs:E,options:L}})),initialize:(E="eng",_=g,M,G)=>A(a({id:G,action:"initialize",payload:{langs:E,oem:_,config:M}})),setParameters:(E={},_)=>A(a({id:_,action:"setParameters",payload:{params:E}})),recognize:w,getPDF:(E="Tesseract OCR Result",_=!1,M)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),A(a({id:M,action:"getPDF",payload:{title:E,textonly:_}}))),detect:k,terminate:D};return A(a({id:undefined,action:"load",payload:{options:L}})).then(()=>j(V)).catch(()=>{}),S})},5825:(u,m,r)=>{r(7854);const l=r(5873),p=r(2841),i=r(9791),a=r(804),f=r(6057),c=r(562),{setLogging:g}=r(7223);u.exports={languages:a,OEM:f,PSM:c,createScheduler:l,createWorker:p,setLogging:g,...i}},9038:u=>{u.exports=m=>{const r=[],l=[],p=[],i=[],a=[];return m.blocks&&m.blocks.forEach(f=>{f.paragraphs.forEach(c=>{c.lines.forEach(g=>{g.words.forEach(v=>{v.symbols.forEach(b=>{a.push({...b,page:m,block:f,paragraph:c,line:g,word:v})}),i.push({...v,page:m,block:f,paragraph:c,line:g})}),p.push({...g,page:m,block:f,paragraph:c})}),l.push({...c,page:m,block:f})}),r.push({...f,page:m})}),{...m,blocks:r,paragraphs:l,lines:p,words:i,symbols:a}}},4469:(u,m,r)=>{const l=r(9456);u.exports=p=>{const i={};return typeof WorkerGlobalScope<"u"?i.type="webworker":l()?i.type="electron":"object"==typeof window?i.type="browser":"object"==typeof process&&(i.type="node"),typeof p>"u"?i:i[p]}},5011:u=>{u.exports=(m,r)=>`${m}-${r}-${Math.random().toString(16).slice(3,8)}`},7223:function(u,m){let r=!1;m.logging=r,m.setLogging=l=>{r=l},m.log=(...l)=>r?console.log.apply(this,l):null},3466:(u,m,r)=>{const p="browser"===r(4469)("type")?r(5555):i=>i;u.exports=i=>{const a={...i};return["corePath","workerPath","langPath"].forEach(f=>{i[f]&&(a[f]=p(a[f]))}),a}},7123:(u,m,r)=>{const l=r(5555),{version:p}=r(4547),i=r(1722);u.exports={...i,workerPath:typeof process<"u"&&"development"===process.env.TESS_ENV?l(`/dist/worker.dev.js?nocache=${Math.random().toString(36).slice(3)}`):`https://unpkg.com/tesseract.js@v${p}/dist/worker.min.js`,corePath:null}},6893:(u,m,r)=>{const l=r(7123),p=r(8766),i=r(7694),a=r(256),f=r(6285),c=r(141);u.exports={defaultOptions:l,spawnWorker:p,terminateWorker:i,onMessage:a,send:f,loadImage:c}},141:(u,m,r)=>{var l=r(7156).default;const p=r(5555),i=f=>new Promise((c,g)=>{const v=new FileReader;v.onload=()=>{c(v.result)},v.onerror=({target:{error:{code:b}}})=>{g(Error(`File could not be read! Code=${b}`))},v.readAsArrayBuffer(f)}),a=function(){var f=l(function*(c){let g=c;return typeof c>"u"?"undefined":("string"==typeof c?g=/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(c)?atob(c.split(",")[1]).split("").map(v=>v.charCodeAt(0)):yield(yield fetch(p(c))).arrayBuffer():c instanceof HTMLElement?("IMG"===c.tagName&&(g=yield a(c.src)),"VIDEO"===c.tagName&&(g=yield a(c.poster)),"CANVAS"===c.tagName&&(yield new Promise(v=>{c.toBlob(function(){var b=l(function*(e){g=yield i(e),v()});return function(e){return b.apply(this,arguments)}}())}))):(c instanceof File||c instanceof Blob)&&(g=yield i(c)),new Uint8Array(g))});return function(g){return f.apply(this,arguments)}}();u.exports=a},256:u=>{u.exports=(m,r)=>{m.onmessage=({data:l})=>{r(l)}}},6285:(u,m,r)=>{var l=r(7156).default;u.exports=function(){var p=l(function*(i,a){i.postMessage(a)});return function(i,a){return p.apply(this,arguments)}}()},8766:u=>{u.exports=({workerPath:m,workerBlobURL:r})=>{let l;if(Blob&&URL&&r){const p=new Blob([`importScripts("${m}");`],{type:"application/javascript"});l=new Worker(URL.createObjectURL(p))}else l=new Worker(m);return l}},7694:u=>{u.exports=m=>{m.terminate()}},7156:u=>{function m(l,p,i,a,f,c,g){try{var v=l[c](g),b=v.value}catch(e){return void i(e)}v.done?p(b):Promise.resolve(b).then(a,f)}u.exports=function r(l){return function(){var p=this,i=arguments;return new Promise(function(a,f){var c=l.apply(p,i);function g(b){m(c,a,f,g,v,"next",b)}function v(b){m(c,a,f,g,v,"throw",b)}g(void 0)})}},u.exports.__esModule=!0,u.exports.default=u.exports},4547:u=>{"use strict";u.exports=JSON.parse('{"name":"tesseract.js","version":"4.0.3","description":"Pure Javascript Multilingual OCR","main":"src/index.js","types":"src/index.d.ts","unpkg":"dist/tesseract.min.js","jsdelivr":"dist/tesseract.min.js","scripts":{"start":"node scripts/server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.js","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json","prepublishOnly":"npm run build","wait":"rimraf dist && wait-on http://localhost:3000/dist/tesseract.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html","lint":"eslint src","lint:fix":"eslint --fix src","postinstall":"opencollective-postinstall || true"},"browser":{"./src/worker/node/index.js":"./src/worker/browser/index.js"},"author":"","contributors":["jeromewu"],"license":"Apache-2.0","devDependencies":{"@babel/core":"^7.18.7","@babel/preset-env":"^7.18.7","@rollup/plugin-commonjs":"^22.0.2","acorn":"^6.4.0","babel-loader":"^8.2.0","buffer":"^6.0.3","cors":"^2.8.5","eslint":"^7.2.0","eslint-config-airbnb-base":"^14.2.0","eslint-plugin-import":"^2.22.1","expect.js":"^0.3.1","express":"^4.17.1","mocha":"^10.0.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5","nyc":"^15.1.0","rimraf":"^2.7.1","rollup":"^2.79.0","wait-on":"^3.3.0","webpack":"^5.74.0","webpack-bundle-analyzer":"^4.6.0","webpack-cli":"^4.10.0","webpack-dev-middleware":"^5.3.3"},"dependencies":{"babel-eslint":"^10.1.0","bmp-js":"^0.1.0","file-type":"^12.4.1","idb-keyval":"^3.2.0","is-electron":"^2.2.0","is-url":"^1.2.4","node-fetch":"^2.6.0","opencollective-postinstall":"^2.0.2","regenerator-runtime":"^0.13.3","resolve-url":"^0.2.1","tesseract.js-core":"^4.0.3","wasm-feature-detect":"^1.2.11","zlibjs":"^0.3.1"},"repository":{"type":"git","url":"https://github.com/naptha/tesseract.js.git"},"bugs":{"url":"https://github.com/naptha/tesseract.js/issues"},"homepage":"https://github.com/naptha/tesseract.js","collective":{"type":"opencollective","url":"https://opencollective.com/tesseractjs"}}')}}]);