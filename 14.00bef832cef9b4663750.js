(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"/Hjt":function(t,e){t.exports=(t,e)=>`${t}-${e}-${Math.random().toString(16).slice(3,8)}`},"5IdF":function(t,e){t.exports=t=>{const e=[],i=[],r=[],n=[],o=[];return t.blocks.forEach(a=>{a.paragraphs.forEach(e=>{e.lines.forEach(i=>{i.words.forEach(r=>{r.symbols.forEach(n=>{o.push({...n,page:t,block:a,paragraph:e,line:i,word:r})}),n.push({...r,page:t,block:a,paragraph:e,line:i})}),r.push({...i,page:t,block:a,paragraph:e})}),i.push({...e,page:t,block:a})}),e.push({...a,page:t})}),{...t,blocks:e,paragraphs:i,lines:r,words:n,symbols:o}}},"67Ye":function(t,e){t.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12"}},DmX5:function(t,e,i){const r=i("PhXl"),n=t=>new Promise((e,i)=>{const r=new FileReader;r.onload=()=>{e(r.result)},r.onerror=({target:{error:{code:t}}})=>{i(Error(`File could not be read! Code=${t}`))},r.readAsArrayBuffer(t)}),o=async t=>{let e=t;if(void 0===t)return"undefined";if("string"==typeof t)if(/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t))e=atob(t.split(",")[1]).split("").map(t=>t.charCodeAt(0));else{const i=await fetch(r(t));e=await i.arrayBuffer()}else t instanceof HTMLElement?("IMG"===t.tagName&&(e=await o(t.src)),"VIDEO"===t.tagName&&(e=await o(t.poster)),"CANVAS"===t.tagName&&await new Promise(i=>{t.toBlob(async t=>{e=await n(t),i()})})):(t instanceof File||t instanceof Blob)&&(e=await n(t));return new Uint8Array(e)};t.exports=o},IIpR:function(t,e,i){const r=i("cYUz"),{log:n}=i("fIT2"),o=i("/Hjt");let a=0;t.exports=()=>{const t=o("Scheduler",a),e={},i={};let s=[];a+=1;const l=()=>Object.keys(e).length,c=()=>{if(0!==s.length){const t=Object.keys(e);for(let r=0;r<t.length;r+=1)if(void 0===i[t[r]]){s[0](e[t[r]]);break}}},h=(e,o)=>new Promise((a,l)=>{const h=r({action:e,payload:o});s.push(async t=>{s.shift(),i[t.id]=h;try{a(await t[e].apply(this,[...o,h.id]))}catch(r){l(r)}finally{delete i[t.id],c()}}),n(`[${t}]: Add ${h.id} to JobQueue`),n(`[${t}]: JobQueue length=${s.length}`),c()});return{addWorker:i=>(e[i.id]=i,n(`[${t}]: Add ${i.id}`),n(`[${t}]: Number of workers=${l()}`),c(),i.id),addJob:async(e,...i)=>{if(0===l())throw Error(`[${t}]: You need to have at least one worker before adding jobs`);return h(e,i)},terminate:async()=>{Object.keys(e).forEach(async t=>{await e[t].terminate()}),s=[]},getQueueLen:()=>s.length,getNumWorkers:l}}},KAeC:function(t,e,i){const r=i("PhXl"),{version:n,dependencies:o}=i("YNtM"),a=i("XbsK");t.exports={...a,workerPath:"undefined"!=typeof process&&"development"===process.env.TESS_ENV?r(`/dist/worker.dev.js?nocache=${Math.random().toString(36).slice(3)}`):`https://unpkg.com/tesseract.js@v${n}/dist/worker.min.js`,corePath:`https://unpkg.com/tesseract.js-core@v${o["tesseract.js-core"].substring(1)}/tesseract-core.${"object"==typeof WebAssembly?"wasm":"asm"}.js`}},PhXl:function(t,e,i){var r,n;void 0===(n="function"==typeof(r=function(){return function(){var t=arguments.length;if(0===t)throw new Error("resolveUrl requires at least one argument; got none.");var e=document.createElement("base");if(e.href=arguments[0],1===t)return e.href;var i=document.getElementsByTagName("head")[0];i.insertBefore(e,i.firstChild);for(var r,n=document.createElement("a"),o=1;o<t;o++)n.href=arguments[o],e.href=r=n.href;return i.removeChild(e),r}})?r.call(e,i,e,t):r)||(t.exports=n)},Seje:function(t,e,i){const r="browser"===i("f4+5")("type")?i("PhXl"):t=>t;t.exports=t=>{const e={...t};return["corePath","workerPath","langPath"].forEach(i=>{void 0!==t[i]&&(e[i]=r(e[i]))}),e}},T00y:function(t,e){t.exports=async(t,e)=>{t.postMessage(e)}},XbsK:function(t,e){t.exports={langPath:"https://tessdata.projectnaptha.com/4.0.0",workerBlobURL:!0,logger:()=>{}}},Y6bo:function(t,e){t.exports=function(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||!("undefined"==typeof process||"object"!=typeof process.versions||!process.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}},YNtM:function(t){t.exports=JSON.parse('{"_from":"tesseract.js@^2.0.2","_id":"tesseract.js@2.0.2","_inBundle":false,"_integrity":"sha512-LeZmvmYDDErqBbVSzvGHAujZUQSmjYB0iZkmwvbc+QbA840rf+0CYkCMURIuE54zDrv0Qms+QINZokQr78FkBA==","_location":"/tesseract.js","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"tesseract.js@^2.0.2","name":"tesseract.js","escapedName":"tesseract.js","rawSpec":"^2.0.2","saveSpec":null,"fetchSpec":"^2.0.2"},"_requiredBy":["#USER","/"],"_resolved":"https://registry.npmjs.org/tesseract.js/-/tesseract.js-2.0.2.tgz","_shasum":"c415472198e0ba2910a6871a137e99bbd32ff34f","_spec":"tesseract.js@^2.0.2","_where":"/Users/eric/eclipse-workspace/HKM6/HKM6","author":"","browser":{"./src/worker/node/index.js":"./src/worker/browser/index.js"},"bugs":{"url":"https://github.com/naptha/tesseract.js/issues"},"bundleDependencies":false,"collective":{"type":"opencollective","url":"https://opencollective.com/tesseractjs"},"contributors":[{"name":"jeromewu"}],"dependencies":{"bmp-js":"^0.1.0","file-type":"^12.4.1","idb-keyval":"^3.2.0","is-electron":"^2.2.0","is-url":"^1.2.4","node-fetch":"^2.6.0","opencollective-postinstall":"^2.0.2","regenerator-runtime":"^0.13.3","resolve-url":"^0.2.1","tesseract.js-core":"^2.0.0","zlibjs":"^0.3.1"},"deprecated":false,"description":"Pure Javascript Multilingual OCR","devDependencies":{"@babel/core":"^7.7.7","@babel/preset-env":"^7.7.7","acorn":"^6.4.0","babel-loader":"^8.0.6","cors":"^2.8.5","eslint":"^5.16.0","eslint-config-airbnb":"^17.1.1","eslint-plugin-import":"^2.19.1","eslint-plugin-jsx-a11y":"^6.2.3","eslint-plugin-react":"^7.17.0","expect.js":"^0.3.1","express":"^4.17.1","mocha":"^5.2.0","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","nyc":"^13.3.0","rimraf":"^2.7.1","wait-on":"^3.3.0","webpack":"^4.41.4","webpack-bundle-analyzer":"^3.6.0","webpack-cli":"^3.3.10","webpack-dev-middleware":"^3.7.2"},"homepage":"https://github.com/naptha/tesseract.js","jsdelivr":"dist/tesseract.min.js","license":"Apache-2.0","main":"src/index.js","name":"tesseract.js","repository":{"type":"git","url":"git+https://github.com/naptha/tesseract.js.git"},"scripts":{"build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","lint":"eslint src","postinstall":"opencollective-postinstall || true","prepublishOnly":"npm run build","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json","start":"node scripts/server.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","wait":"rimraf dist && wait-on http://localhost:3000/dist/tesseract.dev.js"},"types":"src/index.d.ts","unpkg":"dist/tesseract.min.js","version":"2.0.2"}')},"c+Cr":function(t,e,i){const r=i("Seje"),n=i("5IdF"),o=i("cYUz"),{log:a}=i("fIT2"),s=i("/Hjt"),{defaultOEM:l}=i("oGhf"),{defaultOptions:c,spawnWorker:h,terminateWorker:p,onMessage:u,loadImage:g,send:d}=i("dyjd");let m=0;t.exports=(t={})=>{const e=s("Worker",m),{logger:i,errorHandler:f,...b}=r({...c,...t}),v={},y={};let w=h(b);m+=1;const x=(t,e)=>{v[t]=e},S=(t,e)=>{y[t]=e},M=({id:t,action:i,payload:r})=>new Promise((n,o)=>{a(`[${e}]: Start ${t}, action=${i}`),x(i,n),S(i,o),d(w,{workerId:e,jobId:t,action:i,payload:r})});return u(w,({workerId:t,jobId:e,status:r,action:o,data:s})=>{if("resolve"===r){a(`[${t}]: Complete ${e}`);let i=s;"recognize"===o?i=n(s):"getPDF"===o&&(i=Array.from({...s,length:Object.keys(s).length})),v[o]({jobId:e,data:i})}else if("reject"===r){if(y[o](s),!f)throw Error(s);f(s)}else"progress"===r&&i(s)}),{id:e,worker:w,setResolve:x,setReject:S,load:t=>M(o({id:t,action:"load",payload:{options:b}})),loadLanguage:(t="eng",e)=>M(o({id:e,action:"loadLanguage",payload:{langs:t,options:b}})),initialize:(t="eng",e=l,i)=>M(o({id:i,action:"initialize",payload:{langs:t,oem:e}})),setParameters:(t={},e)=>M(o({id:e,action:"setParameters",payload:{params:t}})),recognize:async(t,e={},i)=>M(o({id:i,action:"recognize",payload:{image:await g(t),options:e}})),getPDF:(t="Tesseract OCR Result",e=!1,i)=>M(o({id:i,action:"getPDF",payload:{title:t,textonly:e}})),detect:async(t,e)=>M(o({id:e,action:"detect",payload:{image:await g(t)}})),terminate:async()=>(null!==w&&(p(w),w=null),Promise.resolve())}}},cR1X:function(t,e){t.exports=t=>{t.terminate()}},cYUz:function(t,e,i){const r=i("/Hjt");let n=0;t.exports=({id:t,action:e,payload:i={}})=>{let o=t;return void 0===o&&(o=r("Job",n),n+=1),{id:o,action:e,payload:i}}},dyjd:function(t,e,i){const r=i("KAeC"),n=i("sUgH"),o=i("cR1X"),a=i("eqRM"),s=i("T00y"),l=i("DmX5");t.exports={defaultOptions:r,spawnWorker:n,terminateWorker:o,onMessage:a,send:s,loadImage:l}},eqRM:function(t,e){t.exports=(t,e)=>{t.onmessage=({data:t})=>{e(t)}}},"f4+5":function(t,e,i){const r=i("Y6bo");t.exports=t=>{const e={};return r()?e.type="electron":"object"==typeof window?e.type="browser":"function"==typeof importScripts?e.type="webworker":"object"==typeof process&&(e.type="node"),void 0===t?e:e[t]}},fIT2:function(t,e){let i=!1;e.logging=i,e.setLogging=t=>{i=t},e.log=(...t)=>i?console.log.apply(this,t):null},ls82:function(t,e,i){var r=function(t){"use strict";var e,i=Object.prototype,r=i.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function l(t,e,i,r){var n=Object.create((e&&e.prototype instanceof m?e:m).prototype),o=new A(r||[]);return n._invoke=function(t,e,i){var r=h;return function(n,o){if(r===u)throw new Error("Generator is already running");if(r===g){if("throw"===n)throw o;return k()}for(i.method=n,i.arg=o;;){var a=i.delegate;if(a){var s=C(a,i);if(s){if(s===d)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===h)throw r=g,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=u;var l=c(t,e,i);if("normal"===l.type){if(r=i.done?g:p,l.arg===d)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(r=g,i.method="throw",i.arg=l.arg)}}}(t,i,o),n}function c(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(r){return{type:"throw",arg:r}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",u="executing",g="completed",d={};function m(){}function f(){}function b(){}var v={};v[o]=function(){return this};var y=Object.getPrototypeOf,w=y&&y(y(O([])));w&&w!==i&&r.call(w,o)&&(v=w);var x=b.prototype=m.prototype=Object.create(v);function S(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function M(t){var e;this._invoke=function(i,n){function o(){return new Promise((function(e,o){!function e(i,n,o,a){var s=c(t[i],t,n);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==typeof h&&r.call(h,"__await")?Promise.resolve(h.__await).then((function(t){e("next",t,o,a)}),(function(t){e("throw",t,o,a)})):Promise.resolve(h).then((function(t){l.value=t,o(l)}),(function(t){return e("throw",t,o,a)}))}a(s.arg)}(i,n,e,o)}))}return e=e?e.then(o,o):o()}}function C(t,i){var r=t.iterator[i.method];if(r===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,C(t,i),"throw"===i.method))return d;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=c(r,t.iterator,i.arg);if("throw"===n.type)return i.method="throw",i.arg=n.arg,i.delegate=null,d;var o=n.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,d):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,d)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function z(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function O(t){if(t){var i=t[o];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function i(){for(;++n<t.length;)if(r.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=e,i.done=!0,i};return a.next=a}}return{next:k}}function k(){return{value:e,done:!0}}return f.prototype=x.constructor=b,b.constructor=f,b[s]=f.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},S(M.prototype),M.prototype[a]=function(){return this},t.AsyncIterator=M,t.async=function(e,i,r,n){var o=new M(l(e,i,r,n));return t.isGeneratorFunction(i)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},S(x),x[s]="Generator",x[o]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var r=e.pop();if(r in t)return i.value=r,i.done=!1,i}return i.done=!0,i}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(z),!t)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function n(r,n){return s.type="throw",s.arg=t,i.next=r,n&&(i.method="next",i.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),z(i),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var n=r.arg;z(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:O(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=r}catch(n){Function("r","regeneratorRuntime = r")(r)}},oGhf:function(t,e,i){const r=i("xYo3");t.exports={defaultOEM:r.DEFAULT}},pTnA:function(t,e,i){"use strict";i.r(e);var r=i("CcnG"),n=function(){return function(){}}(),o=i("pMnS"),a=i("mrSG"),s=function(){function t(t,e,i){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=e,this._imageAsDataUrl=t,this._imageData=i}return t.getDataFromDataUrl=function(t,e){return t.replace("data:"+e+";base64,","")},Object.defineProperty(t.prototype,"imageAsBase64",{get:function(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=t.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageAsDataUrl",{get:function(){return this._imageAsDataUrl},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageData",{get:function(){return this._imageData},enumerable:!0,configurable:!0}),t}(),l=function(){function t(){}return t.getAvailableVideoInputs=function(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((function(t,e){navigator.mediaDevices.enumerateDevices().then((function(e){t(e.filter((function(t){return"videoinput"===t.kind})))})).catch((function(t){e(t.message||t)}))})):Promise.reject("enumerateDevices() not supported.")},t}(),c=function(){function t(){this.width=640,this.height=480,this.videoOptions=e.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=e.DEFAULT_IMAGE_TYPE,this.imageQuality=e.DEFAULT_IMAGE_QUALITY,this.imageCapture=new r.r,this.initError=new r.r,this.imageClick=new r.r,this.cameraSwitched=new r.r,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}var e;return e=t,Object.defineProperty(t.prototype,"trigger",{set:function(t){var e=this;this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=t.subscribe((function(){e.takeSnapshot()}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"switchCamera",{set:function(t){var e=this;this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=t.subscribe((function(t){"string"==typeof t?e.switchToVideoInput(t):e.rotateVideoInput(!1!==t)}))},enumerable:!0,configurable:!0}),t.getMediaConstraintsForDevice=function(t,e){var i=e||this.DEFAULT_VIDEO_OPTIONS;return t&&(i.deviceId={exact:t}),i},t.getDeviceIdFromMediaStreamTrack=function(t){if(t.getSettings&&t.getSettings()&&t.getSettings().deviceId)return t.getSettings().deviceId;if(t.getConstraints&&t.getConstraints()&&t.getConstraints().deviceId){var i=t.getConstraints().deviceId;return e.getValueFromConstrainDOMString(i)}},t.getFacingModeFromMediaStreamTrack=function(t){if(t){if(t.getSettings&&t.getSettings()&&t.getSettings().facingMode)return t.getSettings().facingMode;if(t.getConstraints&&t.getConstraints()&&t.getConstraints().facingMode){var i=t.getConstraints().facingMode;return e.getValueFromConstrainDOMString(i)}}},t.isUserFacing=function(t){var i=e.getFacingModeFromMediaStreamTrack(t);return!!i&&"user"===i.toLowerCase()},t.getValueFromConstrainDOMString=function(t){if(t){if(t instanceof String)return String(t);if(Array.isArray(t)&&Array(t).length>0)return String(t[0]);if("object"==typeof t){if(t.exact)return String(t.exact);if(t.ideal)return String(t.ideal)}}return null},t.prototype.ngAfterViewInit=function(){var t=this;this.detectAvailableDevices().then((function(){t.switchToVideoInput(null)})).catch((function(e){t.initError.next({message:e}),t.switchToVideoInput(null)}))},t.prototype.ngOnDestroy=function(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()},t.prototype.takeSnapshot=function(){var t=this.nativeVideoElement,i={width:this.width,height:this.height};t.videoWidth&&(i.width=t.videoWidth,i.height=t.videoHeight);var r=this.canvas.nativeElement;r.width=i.width,r.height=i.height;var n=r.getContext("2d");n.drawImage(t,0,0);var o=this.imageType?this.imageType:e.DEFAULT_IMAGE_TYPE,a=r.toDataURL(o,this.imageQuality?this.imageQuality:e.DEFAULT_IMAGE_QUALITY),l=null;this.captureImageData&&(l=n.getImageData(0,0,r.width,r.height)),this.imageCapture.next(new s(a,o,l))},t.prototype.rotateVideoInput=function(t){this.availableVideoInputs&&this.availableVideoInputs.length>1&&this.switchToVideoInput(this.availableVideoInputs[(this.activeVideoInputIndex+(t?1:this.availableVideoInputs.length-1))%this.availableVideoInputs.length].deviceId)},t.prototype.switchToVideoInput=function(t){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(t,this.videoOptions)},t.prototype.videoResize=function(){},Object.defineProperty(t.prototype,"videoWidth",{get:function(){var t=this.getVideoAspectRatio();return Math.min(this.width,this.height*t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoHeight",{get:function(){var t=this.getVideoAspectRatio();return Math.min(this.height,this.width/t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoStyleClasses",{get:function(){var t="";return this.isMirrorImage()&&(t+="mirrored "),t.trim()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nativeVideoElement",{get:function(){return this.video.nativeElement},enumerable:!0,configurable:!0}),t.prototype.getVideoAspectRatio=function(){var t=this.nativeVideoElement;return t.videoWidth&&t.videoWidth>0&&t.videoHeight&&t.videoHeight>0?t.videoWidth/t.videoHeight:this.width/this.height},t.prototype.initWebcam=function(t,i){var r=this,n=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){var o=e.getMediaConstraintsForDevice(t,i);navigator.mediaDevices.getUserMedia({video:o}).then((function(t){r.mediaStream=t,n.srcObject=t,n.play(),r.activeVideoSettings=t.getVideoTracks()[0].getSettings();var i=e.getDeviceIdFromMediaStreamTrack(t.getVideoTracks()[0]);r.cameraSwitched.next(i),r.detectAvailableDevices().then((function(){r.activeVideoInputIndex=i?r.availableVideoInputs.findIndex((function(t){return t.deviceId===i})):-1,r.videoInitialized=!0})).catch((function(){r.activeVideoInputIndex=-1,r.videoInitialized=!0}))})).catch((function(t){r.initError.next({message:t.message,mediaStreamError:t})}))}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})},t.prototype.getActiveVideoTrack=function(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null},t.prototype.isMirrorImage=function(){if(!this.getActiveVideoTrack())return!1;var t="auto";switch(this.mirrorImage&&("string"==typeof this.mirrorImage?t=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(t=this.mirrorImage.x.toLowerCase())),t){case"always":return!0;case"never":return!1}return e.isUserFacing(this.getActiveVideoTrack())},t.prototype.stopMediaTracks=function(){this.mediaStream&&this.mediaStream.getTracks&&this.mediaStream.getTracks().forEach((function(t){return t.stop()}))},t.prototype.unsubscribeFromSubscriptions=function(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()},t.prototype.detectAvailableDevices=function(){var t=this;return new Promise((function(e,i){l.getAvailableVideoInputs().then((function(i){t.availableVideoInputs=i,e(i)})).catch((function(e){t.availableVideoInputs=[],i(e)}))}))},t.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},t.DEFAULT_IMAGE_TYPE="image/jpeg",t.DEFAULT_IMAGE_QUALITY=.92,t}(),h=function(){return function(){}}(),p=i("Ip0R"),u=r.zb({encapsulation:0,styles:[".webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;position:relative;line-height:0}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scale(-1,1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC);background-repeat:no-repeat;border-radius:5px;position:absolute;right:13px;top:10px;height:48px;width:48px;background-size:80%;cursor:pointer;background-position:center;transition:background-color .2s}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.18)}"],data:{}});function g(t){return r.Wb(0,[(t()(),r.Bb(0,0,null,null,0,"div",[["class","camera-switch"]],null,[[null,"click"]],(function(t,e,i){var r=!0;return"click"===e&&(r=!1!==t.component.rotateVideoInput(!0)&&r),r}),null,null))],null,null)}function d(t){return r.Wb(0,[r.Sb(402653184,1,{video:0}),r.Sb(402653184,2,{canvas:0}),(t()(),r.Bb(2,0,null,null,4,"div",[["class","webcam-wrapper"]],null,[[null,"click"]],(function(t,e,i){var r=!0;return"click"===e&&(r=!1!==t.component.imageClick.next()&&r),r}),null,null)),(t()(),r.Bb(3,0,[[1,0],["video",1]],null,0,"video",[["autoplay",""],["muted",""],["playsinline",""]],[[8,"width",0],[8,"height",0],[8,"className",0]],[[null,"resize"]],(function(t,e,i){var r=!0;return"resize"===e&&(r=!1!==t.component.videoResize()&&r),r}),null,null)),(t()(),r.qb(16777216,null,null,1,null,g)),r.Ab(5,16384,null,0,p.j,[r.W,r.S],{ngIf:[0,"ngIf"]},null),(t()(),r.Bb(6,0,[[2,0],["canvas",1]],null,0,"canvas",[],[[8,"width",0],[8,"height",0]],null,null,null,null))],(function(t,e){var i=e.component;t(e,5,0,i.allowCameraSwitch&&i.availableVideoInputs.length>1&&i.videoInitialized)}),(function(t,e){var i=e.component;t(e,3,0,i.videoWidth,i.videoHeight,i.videoStyleClasses),t(e,6,0,i.width,i.height)}))}var m=i("oBZk"),f=i("ZZ/e"),b=function(){function t(t,e){this.sanitizer=t,this.cd=e,this.setImageMaxSizeRetries=0,this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.exifTransform={rotate:0,flip:!1},this.stepSize=3,this.marginLeft="0px",this.imageVisible=!1,this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.containWithinAspectRatio=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage="center",this.disabled=!1,this.imageCropped=new r.r,this.startCropImage=new r.r,this.imageLoaded=new r.r,this.cropperReady=new r.r,this.loadImageFailed=new r.r,this.initCropper()}return Object.defineProperty(t.prototype,"imageChangedEvent",{set:function(t){this.initCropper(),t&&t.target&&t.target.files&&t.target.files.length>0&&this.loadImageFile(t.target.files[0])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageBase64",{set:function(t){this.initCropper(),this.checkExifAndLoadBase64Image(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageFile",{set:function(t){this.initCropper(),t&&this.loadImageFile(t)},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){this.originalImage&&this.originalImage.complete&&this.exifTransform&&(t.containWithinAspectRatio||t.canvasRotation)&&this.transformOriginalImage(),t.cropper&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.checkCropperPosition(!1),this.doAutoCrop(),this.cd.markForCheck()),t.aspectRatio&&this.imageVisible&&this.resetCropperPosition(),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop())},t.prototype.setCssTransform=function(){this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle("scaleX("+(this.transform.scale||1)*(this.transform.flipH?-1:1)+")scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+")rotate("+(this.transform.rotate||0)+"deg)")},t.prototype.ngOnInit=function(){this.stepSize=this.initialStepSize},t.prototype.initCropper=function(){this.imageVisible=!1,this.transformedImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.originalSize={width:0,height:0},this.transformedSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4},t.prototype.loadImageFile=function(t){var e=this,i=new FileReader;i.onload=function(i){e.isValidImageType(t.type)?e.checkExifAndLoadBase64Image(i.target.result):e.loadImageFailed.emit()},i.readAsDataURL(t)},t.prototype.isValidImageType=function(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff)/.test(t)},t.prototype.checkExifAndLoadBase64Image=function(t){var e=this;return new Promise((function(i,r){var n=function(t){e.originalImage=null,e.originalBase64=null,r(t)};e.originalImage=new Image,e.originalImage.onload=function(){e.originalBase64=t,e.exifTransform=function(t){switch("string"==typeof t&&(t=function(t){var e=new DataView(function(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var e=atob(t),i=e.length,r=new Uint8Array(i),n=0;n<i;n++)r[n]=e.charCodeAt(n);return r.buffer}(t));if(65496!=e.getUint16(0,!1))return-2;for(var i=e.byteLength,r=2;r<i;){if(e.getUint16(r+2,!1)<=8)return-1;var n=e.getUint16(r,!1);if(r+=2,65505==n){if(1165519206!=e.getUint32(r+=2,!1))return-1;var o=18761==e.getUint16(r+=6,!1);r+=e.getUint32(r+4,o);var a=e.getUint16(r,o);r+=2;for(var s=0;s<a;s++)if(274==e.getUint16(r+12*s,o))return e.getUint16(r+12*s+8,o)}else{if(65280!=(65280&n))break;r+=e.getUint16(r,!1)}}return-1}(t)),t){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(t),e.originalSize.width=e.originalImage.naturalWidth,e.originalSize.height=e.originalImage.naturalHeight,e.transformOriginalImage().then((function(){return i()})).catch(n)},e.originalImage.onerror=n,e.originalImage.src=t}))},t.prototype.getTransformedSize=function(){var t=this.canvasRotation+this.exifTransform.rotate;if(this.containWithinAspectRatio){if(t%2){var e=this.originalSize.width*this.aspectRatio,i=this.originalSize.height/this.aspectRatio;return{width:Math.max(this.originalSize.height,e),height:Math.max(this.originalSize.width,i)}}return e=this.originalSize.height*this.aspectRatio,i=this.originalSize.width/this.aspectRatio,{width:Math.max(this.originalSize.width,e),height:Math.max(this.originalSize.height,i)}}return t%2?{height:this.originalSize.width,width:this.originalSize.height}:{width:this.originalSize.width,height:this.originalSize.height}},t.prototype.transformImageBase64=function(){var t=this.canvasRotation+this.exifTransform.rotate,e=this.getTransformedSize(),i=document.createElement("canvas");i.width=e.width,i.height=e.height;var r=i.getContext("2d");return r.setTransform(this.exifTransform.flip?-1:1,0,0,1,i.width/2,i.height/2),r.rotate(Math.PI*(t/2)),r.drawImage(this.originalImage,-this.originalSize.width/2,-this.originalSize.height/2),Promise.resolve(i.toDataURL())},t.prototype.setTransformedImage=function(t){var e=this;return new Promise((function(i,r){e.transformedBase64=t,e.safeImgDataUrl=e.sanitizer.bypassSecurityTrustResourceUrl(t),e.transformedImage=new Image,e.transformedImage.onload=function(){e.transformedSize.width=e.transformedImage.naturalWidth,e.transformedSize.height=e.transformedImage.naturalHeight,i(),e.cd.markForCheck()},e.transformedImage.onerror=function(){e.transformedImage=null,r()},e.transformedImage.src=e.transformedBase64}))},t.prototype.transformOriginalImage=function(){var t=this;return this.originalImage&&this.originalImage.complete&&this.exifTransform?this.transformImageBase64().then((function(e){return t.setTransformedImage(e)})):Promise.reject(new Error("No Image Loaded"))},t.prototype.imageLoadedInView=function(){var t=this;null!=this.transformedImage&&(this.imageLoaded.emit(),this.setImageMaxSizeRetries=0,setTimeout((function(){return t.checkImageMaxSizeRecursively()})))},t.prototype.checkImageMaxSizeRecursively=function(){var t=this;this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0?(this.setMaxSize(),this.setCropperScaledMinSize(),this.resetCropperPosition(),this.cropperReady.emit(Object(a.__assign)({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout((function(){t.checkImageMaxSizeRecursively()}),50))},t.prototype.onResize=function(){this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize()},t.prototype.resizeCropperPosition=function(){var t=this.sourceImage.nativeElement;this.maxSize.width===t.offsetWidth&&this.maxSize.height===t.offsetHeight||(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)},t.prototype.resetCropperPosition=function(){var t=this.sourceImage.nativeElement;if(this.maintainAspectRatio)if(t.offsetWidth/this.aspectRatio<t.offsetHeight){this.cropper.x1=0,this.cropper.x2=t.offsetWidth;var e=t.offsetWidth/this.aspectRatio;this.cropper.y1=(t.offsetHeight-e)/2,this.cropper.y2=this.cropper.y1+e}else{this.cropper.y1=0,this.cropper.y2=t.offsetHeight;var i=t.offsetHeight*this.aspectRatio;this.cropper.x1=(t.offsetWidth-i)/2,this.cropper.x2=this.cropper.x1+i}else this.cropper.x1=0,this.cropper.x2=t.offsetWidth,this.cropper.y1=0,this.cropper.y2=t.offsetHeight;this.doAutoCrop(),this.imageVisible=!0},t.prototype.keyboardAccess=function(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)},t.prototype.changeKeyboardStepSize=function(t){t.key>="1"&&t.key<="9"&&(this.stepSize=+t.key)},t.prototype.keyboardMoveCropper=function(t){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){var e=t.shiftKey?"resize":"move",i=t.altKey?this.getInvertedPositionForKey(t.key):this.getPositionForKey(t.key),r=this.getEventForKey(t.key,this.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},e,i),this.moveImg(r),this.moveStop()}},t.prototype.getPositionForKey=function(t){switch(t){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}},t.prototype.getInvertedPositionForKey=function(t){switch(t){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}},t.prototype.getEventForKey=function(t,e){switch(t){case"ArrowUp":return{clientX:0,clientY:-1*e};case"ArrowRight":return{clientX:e,clientY:0};case"ArrowDown":return{clientX:0,clientY:e};case"ArrowLeft":default:return{clientX:-1*e,clientY:0}}},t.prototype.startMove=function(t,e,i){void 0===i&&(i=null),t.preventDefault&&t.preventDefault(),this.moveStart=Object(a.__assign)({active:!0,type:e,position:i,clientX:this.getClientX(t),clientY:this.getClientY(t)},this.cropper)},t.prototype.moveImg=function(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),"move"===this.moveStart.type?(this.move(t),this.checkCropperPosition(!0)):"resize"===this.moveStart.type&&(this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())},t.prototype.setMaxSize=function(){if(this.sourceImage){var t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}},t.prototype.setCropperScaledMinSize=function(){this.transformedImage?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)},t.prototype.setCropperScaledMinWidth=function(){this.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.transformedImage.width*this.maxSize.width):20},t.prototype.setCropperScaledMinHeight=function(){this.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.transformedImage.height*this.maxSize.height):20},t.prototype.checkCropperPosition=function(t){void 0===t&&(t=!1),this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)},t.prototype.moveStop=function(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())},t.prototype.move=function(t){var e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;this.cropper.x1=this.moveStart.x1+e,this.cropper.y1=this.moveStart.y1+i,this.cropper.x2=this.moveStart.x2+e,this.cropper.y2=this.moveStart.y2+i},t.prototype.resize=function(t){var e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;switch(this.moveStart.position){case"left":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth);break;case"topleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"top":this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"topright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"right":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth);break;case"bottomright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottom":this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottomleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight)}this.maintainAspectRatio&&this.checkAspectRatio()},t.prototype.checkAspectRatio=function(){var t=0,e=0;switch(this.moveStart.position){case"top":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"bottom":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topleft":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topright":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"right":case"bottomright":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"left":case"bottomleft":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio)}},t.prototype.doAutoCrop=function(){this.autoCrop&&this.crop()},t.prototype.crop=function(){if(this.sourceImage&&this.sourceImage.nativeElement&&null!=this.transformedImage){this.startCropImage.emit();var t=this.getImagePosition(),e=t.x2-t.x1,i=t.y2-t.y1,r=document.createElement("canvas");r.width=e,r.height=i;var n=r.getContext("2d");if(n){null!=this.backgroundColor&&(n.fillStyle=this.backgroundColor,n.fillRect(0,0,e,i));var o=(this.transform.scale||1)*(this.transform.flipH?-1:1),s=(this.transform.scale||1)*(this.transform.flipV?-1:1);n.setTransform(o,0,0,s,this.transformedSize.width/2,this.transformedSize.height/2),n.translate(-t.x1/o,-t.y1/s),n.rotate((this.transform.rotate||0)*Math.PI/180),n.drawImage(this.transformedImage,-this.transformedSize.width/2,-this.transformedSize.height/2);var l={width:e,height:i,imagePosition:t,cropperPosition:Object(a.__assign)({},this.cropper)};this.containWithinAspectRatio&&(l.offsetImagePosition=this.getOffsetImagePosition());var c=this.getResizeRatio(e,i);return 1!==c&&(l.width=Math.round(e*c),l.height=this.maintainAspectRatio?Math.round(l.width/this.aspectRatio):Math.round(i*c),function(t,e,i){var r=t.width,n=t.height,o=r/(e=Math.round(e)),a=n/(i=Math.round(i)),s=Math.ceil(o/2),l=Math.ceil(a/2),c=t.getContext("2d");if(c){for(var h=c.getImageData(0,0,r,n),p=c.createImageData(e,i),u=h.data,g=p.data,d=0;d<i;d++)for(var m=0;m<e;m++){var f=4*(m+d*e),b=d*a,v=0,y=0,w=0,x=0,S=0,M=0,C=0,I=Math.floor(m*o),z=Math.floor(d*a),A=Math.ceil((m+1)*o),O=Math.ceil((d+1)*a);A=Math.min(A,r),O=Math.min(O,n);for(var k=z;k<O;k++)for(var P=Math.abs(b-k)/l,_=m*o,R=P*P,E=I;E<A;E++){var j=Math.abs(_-E)/s,L=Math.sqrt(R+j*j);if(!(L>=1)){var T=4*(E+k*r);C+=(v=2*L*L*L-3*L*L+1)*u[T+3],w+=v,u[T+3]<255&&(v=v*u[T+3]/250),x+=v*u[T],S+=v*u[T+1],M+=v*u[T+2],y+=v}}g[f]=x/y,g[f+1]=S/y,g[f+2]=M/y,g[f+3]=C/w}t.width=e,t.height=i,c.putImageData(p,0,0)}}(r,l.width,l.height)),l.base64=this.cropToBase64(r),this.imageCropped.emit(l),l}}return null},t.prototype.getImagePosition=function(){var t=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth,e={x1:Math.round(this.cropper.x1*t),y1:Math.round(this.cropper.y1*t),x2:Math.round(this.cropper.x2*t),y2:Math.round(this.cropper.y2*t)};return this.containWithinAspectRatio||(e.x1=Math.max(e.x1,0),e.y1=Math.max(e.y1,0),e.x2=Math.min(e.x2,this.transformedSize.width),e.y2=Math.min(e.y2,this.transformedSize.height)),e},t.prototype.getOffsetImagePosition=function(){var t,e,i=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth;(this.canvasRotation+this.exifTransform.rotate)%2?(t=(this.transformedSize.width-this.originalSize.height)/2,e=(this.transformedSize.height-this.originalSize.width)/2):(t=(this.transformedSize.width-this.originalSize.width)/2,e=(this.transformedSize.height-this.originalSize.height)/2);var r={x1:Math.round(this.cropper.x1*i)-t,y1:Math.round(this.cropper.y1*i)-e,x2:Math.round(this.cropper.x2*i)-t,y2:Math.round(this.cropper.y2*i)-e};return this.containWithinAspectRatio||(r.x1=Math.max(r.x1,0),r.y1=Math.max(r.y1,0),r.x2=Math.min(r.x2,this.transformedSize.width),r.y2=Math.min(r.y2,this.transformedSize.height)),r},t.prototype.cropToBase64=function(t){return t.toDataURL("image/"+this.format,this.getQuality())},t.prototype.getQuality=function(){return Math.min(1,Math.max(0,this.imageQuality/100))},t.prototype.getResizeRatio=function(t,e){if(this.resizeToWidth>0){if(!this.onlyScaleDown||t>this.resizeToWidth)return this.resizeToWidth/t}else if(this.resizeToHeight>0&&(!this.onlyScaleDown||e>this.resizeToHeight))return this.resizeToHeight/e;return 1},t.prototype.getClientX=function(t){return(t.touches&&t.touches[0]?t.touches[0].clientX:t.clientX)||0},t.prototype.getClientY=function(t){return(t.touches&&t.touches[0]?t.touches[0].clientY:t.clientY)||0},t}(),v=function(){return function(){}}(),y=i("ZYjt"),w=r.zb({encapsulation:0,styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{position:relative;width:100%}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;top:0;left:0;outline:#fff solid 100vw}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:0 0;touch-action:none;outline:rgba(255,255,255,.3) solid 100vw}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:1px dashed;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:focus   .move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw rgba(255,255,255,.3)}@media (orientation:portrait){[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{outline-width:100vh}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh rgba(255,255,255,.3)}}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{display:none}'],data:{}});function x(t){return r.Wb(0,[(t()(),r.Bb(0,0,[[1,0],["sourceImage",1]],null,0,"img",[["class","source-image"]],[[8,"src",4],[4,"visibility",null],[4,"transform",null]],[[null,"load"]],(function(t,e,i){var r=!0;return"load"===e&&(r=!1!==t.component.imageLoadedInView()&&r),r}),null,null))],null,(function(t,e){var i=e.component;t(e,0,0,i.safeImgDataUrl,i.imageVisible?"visible":"hidden",i.safeTransformStyle)}))}function S(t){return r.Wb(0,[(t()(),r.Bb(0,0,null,null,22,"div",[["class","cropper"],["tabindex","0"]],[[2,"rounded",null],[4,"top","px"],[4,"left","px"],[4,"width","px"],[4,"height","px"],[4,"margin-left",null],[4,"visibility",null]],[[null,"keydown"]],(function(t,e,i){var r=!0;return"keydown"===e&&(r=!1!==t.component.keyboardAccess(i)&&r),r}),null,null)),(t()(),r.Bb(1,0,null,null,1,"div",[["class","move"]],null,[[null,"mousedown"],[null,"touchstart"]],(function(t,e,i){var r=!0,n=t.component;return"mousedown"===e&&(r=!1!==n.startMove(i,"move")&&r),"touchstart"===e&&(r=!1!==n.startMove(i,"move")&&r),r}),null,null)),(t()(),r.Ub(-1,null,[" "])),(t()(),r.Bb(3,0,null,null,1,"span",[["class","resize topleft"]],null,[[null,"mousedown"],[null,"touchstart"]],(function(t,e,i){var r=!0,n=t.component;return"mousedown"===e&&(r=!1!==n.startMove(i,"resize","topleft")&&r),"touchstart"===e&&(r=!1!==n.startMove(i,"resize","topleft")&&r),r}),null,null)),(t()(),r.Bb(4,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),r.Bb(5,0,null,null,1,"span",[["class","resize top"]],null,null,null,null,null)),(t()(),r.Bb(6,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),r.Bb(7,0,null,null,1,"span",[["class","resize topright"]],null,[[null,"mousedown"],[null,"touchstart"]],(function(t,e,i){var r=!0,n=t.component;return"mousedown"===e&&(r=!1!==n.startMove(i,"resize","topright")&&r),"touchstart"===e&&(r=!1!==n.startMove(i,"resize","topright")&&r),r}),null,null)),(t()(),r.Bb(8,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),r.Bb(9,0,null,null,1,"span",[["class","resize right"]],null,null,null,null,null)),(t()(),r.Bb(10,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),r.Bb(11,0,null,null,1,"span",[["class","resize bottomright"]],null,[[null,"mousedown"],[null,"touchstart"]],(function(t,e,i){var r=!0,n=t.component;return"mousedown"===e&&(r=!1!==n.startMove(i,"resize","bottomright")&&r),"touchstart"===e&&(r=!1!==n.startMove(i,"resize","bottomright")&&r),r}),null,null)),(t()(),r.Bb(12,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),r.Bb(13,0,null,null,1,"span",[["class","resize bottom"]],null,null,null,null,null)),(t()(),r.Bb(14,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),r.Bb(15,0,null,null,1,"span",[["class","resize bottomleft"]],null,[[null,"mousedown"],[null,"touchstart"]],(function(t,e,i){var r=!0,n=t.component;return"mousedown"===e&&(r=!1!==n.startMove(i,"resize","bottomleft")&&r),"touchstart"===e&&(r=!1!==n.startMove(i,"resize","bottomleft")&&r),r}),null,null)),(t()(),r.Bb(16,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),r.Bb(17,0,null,null,1,"span",[["class","resize left"]],null,null,null,null,null)),(t()(),r.Bb(18,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),r.Bb(19,0,null,null,0,"span",[["class","resize-bar top"]],null,[[null,"mousedown"],[null,"touchstart"]],(function(t,e,i){var r=!0,n=t.component;return"mousedown"===e&&(r=!1!==n.startMove(i,"resize","top")&&r),"touchstart"===e&&(r=!1!==n.startMove(i,"resize","top")&&r),r}),null,null)),(t()(),r.Bb(20,0,null,null,0,"span",[["class","resize-bar right"]],null,[[null,"mousedown"],[null,"touchstart"]],(function(t,e,i){var r=!0,n=t.component;return"mousedown"===e&&(r=!1!==n.startMove(i,"resize","right")&&r),"touchstart"===e&&(r=!1!==n.startMove(i,"resize","right")&&r),r}),null,null)),(t()(),r.Bb(21,0,null,null,0,"span",[["class","resize-bar bottom"]],null,[[null,"mousedown"],[null,"touchstart"]],(function(t,e,i){var r=!0,n=t.component;return"mousedown"===e&&(r=!1!==n.startMove(i,"resize","bottom")&&r),"touchstart"===e&&(r=!1!==n.startMove(i,"resize","bottom")&&r),r}),null,null)),(t()(),r.Bb(22,0,null,null,0,"span",[["class","resize-bar left"]],null,[[null,"mousedown"],[null,"touchstart"]],(function(t,e,i){var r=!0,n=t.component;return"mousedown"===e&&(r=!1!==n.startMove(i,"resize","left")&&r),"touchstart"===e&&(r=!1!==n.startMove(i,"resize","left")&&r),r}),null,null))],null,(function(t,e){var i=e.component;t(e,0,0,i.roundCropper,i.cropper.y1,i.cropper.x1,i.cropper.x2-i.cropper.x1,i.cropper.y2-i.cropper.y1,"center"===i.alignImage?i.marginLeft:null,i.imageVisible?"visible":"hidden")}))}function M(t){return r.Wb(2,[r.Sb(671088640,1,{sourceImage:0}),(t()(),r.Bb(1,0,null,null,5,"div",[],[[4,"background",null]],null,null,null,null)),(t()(),r.qb(16777216,null,null,1,null,x)),r.Ab(3,16384,null,0,p.j,[r.W,r.S],{ngIf:[0,"ngIf"]},null),(t()(),r.Bb(4,0,null,null,0,"div",[["class","overlay"]],[[4,"width","px"],[4,"height","px"],[4,"margin-left",null]],null,null,null,null)),(t()(),r.qb(16777216,null,null,1,null,S)),r.Ab(6,16384,null,0,p.j,[r.W,r.S],{ngIf:[0,"ngIf"]},null)],(function(t,e){var i=e.component;t(e,3,0,i.safeImgDataUrl),t(e,6,0,i.imageVisible)}),(function(t,e){var i=e.component;t(e,1,0,i.imageVisible&&i.backgroundColor),t(e,4,0,i.maxSize.width,i.maxSize.height,"center"===i.alignImage?i.marginLeft:null)}))}var C=i("K9Ia"),I=i("yb/K"),z=i("OlR4"),A=function(){function t(t){this.commonService=t,this.screenWidth=window.innerWidth,this.result="-",this.showWebcam=!0,this.allowCameraSwitch=!0,this.multipleWebcamsAvailable=!1,this.videoOptions={},this.errors=[],this.webcamImage=null,this.trigger=new C.a,this.nextWebcam=new C.a,this.imageChangedEvent="",this.croppedImage=""}return t.prototype.ngOnInit=function(){var t=this;l.getAvailableVideoInputs().then((function(e){t.multipleWebcamsAvailable=e&&e.length>1}))},t.prototype.triggerSnapshot=function(){this.trigger.next()},t.prototype.toggleWebcam=function(){this.showWebcam=!this.showWebcam},t.prototype.handleInitError=function(t){this.errors.push(t),this.commonService.showAlert("ERROR","iPhone(iOS) 用户請使用 Safari 開啟!")},t.prototype.showNextWebcam=function(t){this.nextWebcam.next(t)},t.prototype.handleImage=function(t){console.info("received webcam image",t),this.webcamImage=t,this.theCamImage=this.webcamImage.imageAsDataUrl},t.prototype.cameraWasSwitched=function(t){console.log("active device: "+t),this.deviceId=t},Object.defineProperty(t.prototype,"triggerObservable",{get:function(){return this.trigger.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextWebcamObservable",{get:function(){return this.nextWebcam.asObservable()},enumerable:!0,configurable:!0}),t.prototype.takePhoto=function(){this.trigger.next()},t.prototype.check=function(){if(this.croppedImage&&"-"!==this.result){var t=this.result.split("/");for(var e in t)console.log(">>>>"+t[e])}else this.commonService.showAlert("Error","請先拍照，然後裁剪彩票至只有投注號碼！")},t.prototype.reset=function(){},t.prototype.imageCropped=function(t){this.croppedImage=t.base64,this.doOCR()},t.prototype.imageLoaded=function(){console.log("cropper image loaded")},t.prototype.cropperReady=function(){console.log("cropper ready")},t.prototype.loadImageFailed=function(){console.log("cropper loadImageFailed")},t.prototype.doOCR=function(){var t=Object(I.createWorker)({logger:function(t){return console.log(t)}});Object(a.__awaiter)(this,void 0,void 0,(function(){var e;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return[4,t.load()];case 1:return i.sent(),[4,t.loadLanguage("eng")];case 2:return i.sent(),[4,t.initialize("eng")];case 3:return i.sent(),[4,t.setParameters({tessedit_char_whitelist:"0123456789+/ "})];case 4:return i.sent(),[4,t.recognize(this.croppedImage)];case 5:return e=i.sent().data.text,console.log(e),this.result=e,[4,t.terminate()];case 6:return i.sent(),[2]}}))}))},t}(),O=r.zb({encapsulation:0,styles:[[""]],data:{}});function k(t){return r.Wb(0,[(t()(),r.Bb(0,0,null,null,1,"webcam",[],null,[[null,"imageCapture"],[null,"cameraSwitched"],[null,"initError"]],(function(t,e,i){var r=!0,n=t.component;return"imageCapture"===e&&(r=!1!==n.handleImage(i)&&r),"cameraSwitched"===e&&(r=!1!==n.cameraWasSwitched(i)&&r),"initError"===e&&(r=!1!==n.handleInitError(i)&&r),r}),d,u)),r.Ab(1,4374528,null,0,c,[],{width:[0,"width"],height:[1,"height"],videoOptions:[2,"videoOptions"],allowCameraSwitch:[3,"allowCameraSwitch"],imageQuality:[4,"imageQuality"],trigger:[5,"trigger"],switchCamera:[6,"switchCamera"]},{imageCapture:"imageCapture",initError:"initError",cameraSwitched:"cameraSwitched"})],(function(t,e){var i=e.component;t(e,1,0,i.screenWidth,200,i.videoOptions,i.allowCameraSwitch,1,i.triggerObservable,i.nextWebcamObservable)}),null)}function P(t){return r.Wb(0,[(t()(),r.Bb(0,0,null,null,18,"ion-header",[],null,null,null,m.D,m.h)),r.Ab(1,49152,null,0,f.C,[r.j,r.p,r.F],null,null),(t()(),r.Bb(2,0,null,0,16,"ion-toolbar",[],null,null,null,m.R,m.v)),r.Ab(3,49152,null,0,f.Db,[r.j,r.p,r.F],null,null),(t()(),r.Bb(4,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,m.z,m.d)),r.Ab(5,49152,null,0,f.m,[r.j,r.p,r.F],null,null),(t()(),r.Bb(6,0,null,0,1,"ion-menu-button",[],null,null,null,m.K,m.p)),r.Ab(7,49152,null,0,f.S,[r.j,r.p,r.F],null,null),(t()(),r.Bb(8,0,null,0,7,"ion-buttons",[["class","ion-padding"],["slot","end"]],null,null,null,m.z,m.d)),r.Ab(9,49152,null,0,f.m,[r.j,r.p,r.F],null,null),(t()(),r.Bb(10,0,null,0,2,"ion-button",[],null,[[null,"click"]],(function(t,e,i){var r=!0;return"click"===e&&(r=!1!==t.component.reset()&&r),r}),m.y,m.c)),r.Ab(11,49152,null,0,f.l,[r.j,r.p,r.F],null,null),(t()(),r.Ub(-1,0,["重選"])),(t()(),r.Bb(13,0,null,0,2,"ion-button",[],null,[[null,"click"]],(function(t,e,i){var r=!0;return"click"===e&&(r=!1!==t.component.check()&&r),r}),m.y,m.c)),r.Ab(14,49152,null,0,f.l,[r.j,r.p,r.F],null,null),(t()(),r.Ub(-1,0,["核對"])),(t()(),r.Bb(16,0,null,0,2,"ion-title",[],null,null,null,m.P,m.t)),r.Ab(17,49152,null,0,f.Bb,[r.j,r.p,r.F],null,null),(t()(),r.Ub(-1,0,[" 一拍即對 "])),(t()(),r.Bb(19,0,null,null,15,"ion-content",[["class","ion-padding"]],null,null,null,m.B,m.f)),r.Ab(20,49152,null,0,f.v,[r.j,r.p,r.F],null,null),(t()(),r.Bb(21,0,null,0,13,"div",[["style","text-align: center;"]],null,null,null,null,null)),(t()(),r.qb(16777216,null,null,1,null,k)),r.Ab(23,16384,null,0,p.j,[r.W,r.S],{ngIf:[0,"ngIf"]},null),(t()(),r.Bb(24,0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.Bb(25,0,null,null,3,"div",[["class","col text-center"]],null,null,null,null,null)),(t()(),r.Bb(26,0,null,null,2,"ion-button",[["style","text-align: center;"]],null,[[null,"click"]],(function(t,e,i){var r=!0;return"click"===e&&(r=!1!==t.component.takePhoto()&&r),r}),m.y,m.c)),r.Ab(27,49152,null,0,f.l,[r.j,r.p,r.F],null,null),(t()(),r.Ub(-1,0,["拍照"])),(t()(),r.Bb(29,0,null,null,1,"image-cropper",[["format","png"]],[[4,"text-align",null],[2,"disabled",null]],[[null,"imageCropped"],[null,"imageLoaded"],[null,"cropperReady"],[null,"loadImageFailed"],["window","resize"],["document","mousemove"],["document","touchmove"],["document","mouseup"],["document","touchend"]],(function(t,e,i){var n=!0,o=t.component;return"window:resize"===e&&(n=!1!==r.Nb(t,30).onResize()&&n),"document:mousemove"===e&&(n=!1!==r.Nb(t,30).moveImg(i)&&n),"document:touchmove"===e&&(n=!1!==r.Nb(t,30).moveImg(i)&&n),"document:mouseup"===e&&(n=!1!==r.Nb(t,30).moveStop()&&n),"document:touchend"===e&&(n=!1!==r.Nb(t,30).moveStop()&&n),"imageCropped"===e&&(n=!1!==o.imageCropped(i)&&n),"imageLoaded"===e&&(n=!1!==o.imageLoaded()&&n),"cropperReady"===e&&(n=!1!==o.cropperReady()&&n),"loadImageFailed"===e&&(n=!1!==o.loadImageFailed()&&n),n}),M,w)),r.Ab(30,638976,null,0,b,[y.b,r.j],{imageBase64:[0,"imageBase64"],format:[1,"format"],maintainAspectRatio:[2,"maintainAspectRatio"],resizeToWidth:[3,"resizeToWidth"]},{imageCropped:"imageCropped",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed"}),(t()(),r.Bb(31,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r.Bb(32,0,null,null,0,"img",[["style","width: 100%; height: 150;"]],[[8,"src",4]],null,null,null,null)),(t()(),r.Bb(33,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r.Ub(34,null,[" "," "]))],(function(t,e){var i=e.component;t(e,23,0,i.showWebcam),t(e,30,0,i.theCamImage,"png",!1,!0)}),(function(t,e){var i=e.component;t(e,29,0,r.Nb(e,30).alignImage,r.Nb(e,30).disabled),t(e,32,0,i.croppedImage),t(e,34,0,i.result)}))}function _(t){return r.Wb(0,[(t()(),r.Bb(0,0,null,null,1,"app-capcheck",[],null,null,null,P,O)),r.Ab(1,114688,null,0,A,[z.a],null,null)],(function(t,e){t(e,1,0)}),null)}var R=r.xb("app-capcheck",A,_,{},{},[]),E=i("gIcY"),j=i("ZYCi");i.d(e,"CapCheckComponentModuleNgFactory",(function(){return L}));var L=r.yb(n,[],(function(t){return r.Kb([r.Lb(512,r.m,r.jb,[[8,[o.a,R]],[3,r.m],r.D]),r.Lb(4608,p.l,p.k,[r.z,[2,p.s]]),r.Lb(4608,E.i,E.i,[]),r.Lb(4608,f.b,f.b,[r.F,r.g]),r.Lb(4608,f.Ib,f.Ib,[f.b,r.m,r.w]),r.Lb(4608,f.Mb,f.Mb,[f.b,r.m,r.w]),r.Lb(1073742336,p.b,p.b,[]),r.Lb(1073742336,E.h,E.h,[]),r.Lb(1073742336,E.a,E.a,[]),r.Lb(1073742336,f.Fb,f.Fb,[]),r.Lb(1073742336,h,h,[]),r.Lb(1073742336,v,v,[]),r.Lb(1073742336,j.p,j.p,[[2,j.u],[2,j.n]]),r.Lb(1073742336,n,n,[]),r.Lb(1024,j.l,(function(){return[[{path:"",component:A}]]}),[])])}))},sUgH:function(t,e){t.exports=({workerPath:t,workerBlobURL:e})=>{let i;if(Blob&&URL&&e){const e=new Blob([`importScripts("${t}");`],{type:"application/javascript"});i=new Worker(URL.createObjectURL(e))}else i=new Worker(t);return i}},wRsi:function(t,e,i){const r=i("c+Cr");t.exports={recognize:async(t,e,i)=>{const n=r(i);return await n.load(),await n.loadLanguage(e),await n.initialize(e),n.recognize(t).finally(async()=>{await n.terminate()})},detect:async(t,e)=>{const i=r(e);return await i.load(),await i.loadLanguage("osd"),await i.initialize("osd"),i.detect(t).finally(async()=>{await i.terminate()})}}},xYo3:function(t,e){t.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},"yb/K":function(t,e,i){i("ls82");const r=i("IIpR"),n=i("c+Cr"),o=i("wRsi"),a=i("xYo3"),s=i("67Ye"),{setLogging:l}=i("fIT2");t.exports={OEM:a,PSM:s,createScheduler:r,createWorker:n,setLogging:l,...o}}}]);